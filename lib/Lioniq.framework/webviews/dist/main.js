webpackJsonp([2],{0:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=o(7),n=i(s),l=o(47),r=i(l),a=o(48),c=i(a),d=o(39),p=i(d),u=o(223),f=i(u),m=o(202),v=i(m);o(34),o(35),o(36),o(37),n["default"].use(r["default"]),n["default"].use(c["default"]);var x=new c["default"];x.map({"/":{component:v["default"]},"/shop":{component:v["default"]},"/items/:id":{component:f["default"]}}),x.beforeEach(function(){window.scrollTo(0,0)}),x.redirect({"*":"/shop"}),x.start(p["default"],"#app")},52:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(3),n=i(s),l=o(45),r=i(l),a=o(226),c=i(a),d=o(6),p=i(d),u=o(15),f=i(u),m=o(205),v=i(m),x=o(220),h=i(x);t["default"]={name:"ShopView",components:{NavBarPlaceholder:r["default"],TabBarPlaceholder:c["default"],LoadingCover:p["default"],ErrorView:f["default"],Collection:h["default"],Banners:v["default"]},ready:function(){this.getCollections(),this.getBanners()},data:function(){return{collections:[],banners:[],isLoading:!0,showError:!1}},route:{data:function(e){e.to;didMain()}},methods:{getCollections:function(){var e=this,t=function(t){console.log("[getCollections callback] response: "+(0,n["default"])(t.body)),e.$set("collections",t.json()),e.$set("isLoading",!1)},o=function(t){console.log("[error callback] response: "+(0,n["default"])(t)),e.$set("isLoading",!1),e.$set("showError",!0)},i=API_URL+"/api/collections",s={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(i,{headers:s}).then(t,o)},getBanners:function(){var e=this,t=function(t){console.log("[getBanners callback] response: "+(0,n["default"])(t.body)),e.$set("banners",t.json())},o=function(e){console.log("[getBanners error callback] response: "+(0,n["default"])(e))},i=API_URL+"/api/banners",s={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(i,{headers:s}).then(t,o)}}}},56:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(24);t["default"]={name:"Banners",props:{banners:Array},components:{Carousel:i.Carousel,CarouselItem:i.CarouselItem}}},72:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(224),n=i(s);t["default"]={name:"Collection",props:{collection:Object},components:{ItemsGrid:n["default"]}}},73:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Item",props:{item:Object}}},74:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(3),n=i(s),l=o(225),r=i(l),a=o(46),c=i(a);t["default"]={name:"ItemSelectView",props:{item:Object,pickedSize:Object,pickedColor:Object},data:function(){return{qty:1}},components:{QtyInput:r["default"]},methods:{pickSize:function(e){console.log("[ItemSelectView pickSize] size: "+e.label),this.$set("pickedSize",e)},pickColor:function(e){console.log("[ItemSelectView pickColor] color: "+e.label),this.$set("pickedColor",e)},validateSize:function(){var e=!1;return e=!(this.item.sizes&&this.item.sizes.length>0)||!!this.pickedSize},validateColor:function(){var e=!1;return e=!(this.item.colors&&this.item.colors.length>0)||!!this.pickedColor},isDisabled:function(){return!(this.validateColor()&&this.validateSize())},isUserLoggedIn:function(){return"undefined"!=typeof APP_SHOP_USER&&(APP_SHOP_USER&&"TEMPLATE_APP_SHOP_USER"!=APP_SHOP_USER)},addToCart:function(){if(!this.isUserLoggedIn())return void didAddToCart({});var e={item_key:this.item.key,qty:this.qty};this.pickedSize&&(e.size=this.pickedSize.label),this.pickedColor&&(e.color=this.pickedColor.label),console.log("[ItemSelectView addToCart] "+(0,n["default"])(e));var t=this,o=function(e){console.log("[ItemSelectView addToCart callback] response: "+(0,n["default"])(e.body));var o=(0,n["default"])(e.body);didAddToCart(o),(0,c["default"])("成功","加入了购物车",{type:"success"}).then(function(e,o){t.dismiss()})},i=function(e){console.log("[ItemSelectView addToCart error] response: "+(0,n["default"])(e)),(0,c["default"])("失败","抱歉发生了错误，请稍候再试",{type:"error"}).then(function(e,o){t.dismiss()})},s=API_URL+"/api/cart/add",l={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET,"X-APP-SHOP-USER":APP_SHOP_USER},r={add:e};this.$http.patch(s,r,{headers:l}).then(o,i)},dismiss:function(){this.$parent.dismissItemSelect()}}}},75:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(3),n=i(s),l=o(24),r=o(44),a=i(r),c=o(6),d=i(c),p=o(42),u=i(p),f=o(43),m=i(f),v=o(222),x=i(v),h=o(41),b=i(h),g=o(7),y=i(g);y["default"].transition("slideUp",{enterClass:"slideUp-enter",leaveClass:"slideDown-leave"}),t["default"]={name:"ItemView",data:function(){return{item:{},isLoading:!0,showSelect:!1,showEmpty:!1}},components:{Carousel:l.Carousel,CarouselItem:l.CarouselItem,EmptyItemView:m["default"],LoadingCover:d["default"],DarkCover:u["default"],ItemViewBody:b["default"],ItemSelect:x["default"],NavBar:a["default"]},ready:function(){},route:{data:function(e){var t=e.to,o=t.params.id;document.title="Lion IQ Item Detail View",didItemDetail(),this.getItem(o),console.log("[ItemView route] params: "+o)},deactivate:function(e){this.$set("isLoading",!0),this.$set("showSelect",!1),this.$set("showEmpty",!1),e.next()}},methods:{addToCart:function(){this.$set("showSelect",!0)},dismissItemSelect:function(){this.$set("showSelect",!1)},getItem:function(e){var t=this,o=function(e){console.log("[ItemView callback] response: "+(0,n["default"])(e.body));var o=e.json();t.$set("item",o),t.$set("isLoading",!1),didLoadItemDetail(o),document.title=this.item.title+" | Lion IQ"},i=function(e){console.log("[error callback] response: "+(0,n["default"])(e)),t.$set("isLoading",!1),t.$set("showEmpty",!0)},s=API_URL+"/api/items/"+e,l={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(s,{headers:l}).then(o,i)}}}},77:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(221),n=i(s);t["default"]={name:"ItemsGrid",props:{items:Array},components:{Item:n["default"]}}},78:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"QtyInput",props:{qty:1},methods:{plus:function(){this.qty=this.qty+1},minus:function(){this.qty>0&&(this.qty=this.qty-1)}}}},85:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"NavBarPlaceholder"}},126:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"#shop{margin-top:64px;padding-top:60px;background-color:#f6f6f6}",""])},130:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".banners-view{margin-top:-60px;margin-bottom:30px}.carousel-item img{width:100%}.banners-view .carousel-dot{width:12px;height:12px;border-radius:6px;font-size:0}.banners-view .carousel-dot.active{background-color:#ccc}",""])},146:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,'.collection{margin-bottom:40px}.collection-title{margin:8px}.fancy{line-height:.5;text-align:center}.fancy span{display:inline-block;position:relative}.fancy span:after,.fancy span:before{content:"";position:absolute;height:5px;border-top:1px solid #ddd;top:2.5px;width:50%}.fancy span:before{right:100%;margin-right:15px}.fancy span:after{left:100%;margin-left:15px}',""])},147:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"h5{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}article.item{box-shadow:0 1px .2em hsla(0,0%,7%,.2);background-color:#fff}",""])},148:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"#itemSelect{height:60%;margin-top:100%;width:100%;background-color:#fff;position:fixed;z-index:400}.skew.button{min-width:44px;margin:0 10px}.msgbox-header{text-align:center}button.msgbox-btn{color:#0038d9}",""])},149:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".carousel-item img{width:100%}.item-view .carousel-dot{width:12px;height:12px;border-radius:6px;font-size:0}.item-view .carousel-dot.active{background-color:#ccc}.cta-footer{width:100%;border-top:1px solid #ddd;background-color:#fff;padding:8px 16px;position:fixed;bottom:0;z-index:10}.cta-footer>section{text-align:center}",""])},151:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".island{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},152:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".qty-form{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center}.qty-input{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:center}.minus-btn,.plus-btn{width:60px}",""])},166:function(e,t){e.exports=' <div id=shop> <nav-bar-placeholder></nav-bar-placeholder> <error-view v-show=showError></error-view> <loading-cover v-show=isLoading transition=fade> </loading-cover> <banners :banners=banners></banners> <collection v-for="collection in collections" :collection=collection> </collection> <tab-bar-placeholder></tab-bar-placeholder> </div> '},170:function(e,t){e.exports=' <div class=banners-view v-if="banners && (banners.length > 0)"> <carousel :indicators=true :auto=3000 :responsive=67 :loop=true> <carousel-item v-for="banner in banners"> <img :src=banner.image_url> </carousel-item> </carousel> </div> '},186:function(e,t){e.exports=' <div class=collection-wrapper> <h4 class="fancy collection-title"><span>{{ collection.title }}</span></h4> <div class=collection v-if="collection.items && (collection.items.length > 0)"> <items-grid :items=collection.items></items-grid> </div> </div> '},187:function(e,t){e.exports=' <article class=item> <a href="#/items/{{ item.key }}"> <div class=full-width><img :src=item.square_cover_photo_url /></div> <section> <h5 class=item_title>{{ item.title }}</h5> <p style="margin: 0"><span class=price>{{ item.price / 100 | currency "¥ " 2 }}</span></p> </section> </a> </article> '},188:function(e,t){e.exports=' <div id=itemSelect> <section> <div class=pull-left style="margin-top: -20px; margin-right: 20px"> <img :src=item.square_cover_photo_url style="width: 60px; height: 60px"/> </div> <div class=pull-left> <div class=clearfix> <h5 class=price>{{ item.price | currency "¥ " 2 }}</h5> <p>请选择</p> </div> </div> <div class=pull-right> <div class="mute small button pseudo" v-on:click.self=dismiss>[x]</div> </div> <div class=clearfix></div> </section> <hr/> <section v-if="item.sizes && (item.sizes.length > 0) "> <article class="flex five"> <div class=fifth>尺寸</div> <div class=four-fifth> <div v-for="size in item.sizes" class="size small skew button" :class="{\'outline\': (size != pickedSize)}" v-on:click.self=pickSize(size)> {{ size.label }} </div> </div> </article> <hr class=cell /> </section> <section v-if="item.colors && (item.colors.length > 0)"> <article class="flex five"> <div class=fifth>颜色</div> <div class=four-fifth> <div v-for="color in item.colors" class="color small skew button outline" :class="{\'outline\': (color != pickedColor)}" v-on:click.self=pickColor(color)> {{ color.label }} </div> </div> </article> <hr class=cell /> </section> <section> <article class="flex five"> <div class=fifth>数量</div> <div class=four-fifth> <qty-input :qty=1></qty-input> </div> </article> </section> <section style="position: fixed; bottom: 10px; height: 44px"> <button class="button buy success" style="width: 100%" :disabled=isDisabled() @click=addToCart> 加入购物车 </button> </section> </div> '},189:function(e,t){e.exports=' <div id=item-view> <dark-cover v-show=showSelect transition=fade v-on:click.self=dismissItemSelect> </dark-cover> <nav-bar></nav-bar> <empty-item-view v-show=showEmpty></empty-item-view> <loading-cover v-show=isLoading transition=fade> </loading-cover> <div id=item-view-container> <item-select v-show=showSelect :item=item transition=""> </item-select> <div class=item-view style="margin-top: -60px"> <carousel :indicators=true :auto=3000 :responsive=100 :loop=true> <carousel-item v-for="photo in item.photos"> <img :src=photo.image_url> </carousel-item> </carousel> </div> <item-view-body :item=item></item-view-body> <div style="height: 70px; width: 100%"></div> <div class="cta-footer center"> <div class="button outline success" style="width: 100%" v-on:click.self=addToCart>加入购物车</div> </div> </div> </div> '},191:function(e,t){e.exports=' <div class=items-container> <div class="items-grid flex two"> <item v-for="item in items" :item=item track-by=$index></item> </div> </div> '},192:function(e,t){e.exports=' <div class=qty-form> <div class=minus-btn @click=minus :disabled="qty <= 0"> - </div> <input class=qty-input :value=qty /> <div class=plus-btn @click=plus> + </div> </div> '},199:function(e,t){e.exports=' <div id=tabbar-wrapper> <div style="height: 64px; padding-top: 20px"> </div> </div> '},202:function(e,t,o){var i,s;o(230),i=o(52),s=o(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},205:function(e,t,o){var i,s;o(234),i=o(56),s=o(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},220:function(e,t,o){var i,s;o(250),i=o(72),s=o(186),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},221:function(e,t,o){var i,s;o(251),i=o(73),s=o(187),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},222:function(e,t,o){var i,s;o(252),i=o(74),s=o(188),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},223:function(e,t,o){var i,s;o(253),i=o(75),s=o(189),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},224:function(e,t,o){var i,s;o(255),i=o(77),s=o(191),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},225:function(e,t,o){var i,s;o(256),i=o(78),s=o(192),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},226:function(e,t,o){var i,s;i=o(85),s=o(199),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),s&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=s)},230:function(e,t,o){var i=o(126);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},234:function(e,t,o){var i=o(130);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},250:function(e,t,o){var i=o(146);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},251:function(e,t,o){var i=o(147);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},252:function(e,t,o){var i=o(148);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},253:function(e,t,o){var i=o(149);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},255:function(e,t,o){var i=o(151);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},256:function(e,t,o){var i=o(152);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)}});
//# sourceMappingURL=main.js.map