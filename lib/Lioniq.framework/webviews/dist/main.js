webpackJsonp([3],{0:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=o(5),n=i(s),r=o(70),c=i(r),a=o(71),l=i(a),p=o(58),d=i(p),u=o(61),f=i(u),m=o(240),v=i(m);o(48),o(49),o(50),o(51),n.default.use(c.default),n.default.use(l.default);var h=new l.default;h.map({"/":{component:v.default},"/shop":{component:v.default},"/items/:id":{component:f.default}}),h.beforeEach(function(){window.scrollTo(0,0)}),h.redirect({"*":"/shop"}),h.start(d.default,"#app")},19:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(4),n=i(s),r=o(63),c=i(r),a=o(69),l=i(a);t.default={name:"ItemSelectView",props:{item:Object,pickedSize:Object,pickedColor:Object},data:function(){return{qty:1}},components:{QtyInput:c.default},methods:{pickSize:function(e){console.log("[ItemSelectView pickSize] size: "+e.label),this.$set("pickedSize",e)},pickColor:function(e){console.log("[ItemSelectView pickColor] color: "+e.label),this.$set("pickedColor",e)},validateSize:function(){var e=!1;return e=!(this.item.sizes&&this.item.sizes.length>0)||!!this.pickedSize},validateColor:function(){var e=!1;return e=!(this.item.colors&&this.item.colors.length>0)||!!this.pickedColor},isDisabled:function(){return!(this.validateColor()&&this.validateSize())},isUserLoggedIn:function(){return"undefined"!=typeof APP_SHOP_USER&&(APP_SHOP_USER&&"TEMPLATE_APP_SHOP_USER"!=APP_SHOP_USER)},addToCart:function(){if(!this.isUserLoggedIn())return void didAddToCart({});var e={item_key:this.item.key,qty:this.qty};this.pickedSize&&(e.size=this.pickedSize.label),this.pickedColor&&(e.color=this.pickedColor.label),console.log("[ItemSelectView addToCart] "+(0,n.default)(e));var t=this,o=function(e){console.log("[ItemSelectView addToCart callback] response: "+(0,n.default)(e.body));var o=(0,n.default)(e.body);didAddToCart(o),(0,l.default)("成功","加入了购物车",{type:"success"}).then(function(e,o){t.dismiss()})},i=function(e){console.log("[ItemSelectView addToCart error] response: "+(0,n.default)(e)),(0,l.default)("失败","抱歉发生了错误，请稍候再试",{type:"error"}).then(function(e,o){t.dismiss()})},s=API_URL+"/api/cart/add",r={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET,"X-APP-SHOP-USER":APP_SHOP_USER},c={add:e};this.$http.patch(s,c,{headers:r}).then(o,i)},dismiss:function(){this.pickedSize=null,this.pickedColor=null,this.$parent.dismissItemSelect()}}}},20:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(4),n=i(s),r=o(18),c=o(66),a=i(c),l=o(6),p=i(l),d=o(64),u=i(d),f=o(65),m=i(f),v=o(60),h=i(v),x=o(62),b=i(x),g=o(5),y=i(g);y.default.transition("slideUp",{enterClass:"slideUp-enter",leaveClass:"slideDown-leave"}),t.default={name:"ItemView",data:function(){return{item:{},isLoading:!0,showSelect:!1,showEmpty:!1}},components:{Carousel:r.Carousel,CarouselItem:r.CarouselItem,EmptyItemView:m.default,LoadingCover:p.default,DarkCover:u.default,ItemViewBody:b.default,ItemSelect:h.default,NavBar:a.default},ready:function(){},route:{data:function(e){var t=e.to,o=t.params.id;document.title="Lion IQ Item Detail View",didItemDetail(),this.getItem(o),console.log("[ItemView route] params: "+o)},deactivate:function(e){this.$set("isLoading",!0),this.$set("showSelect",!1),this.$set("showEmpty",!1),e.next()}},methods:{addToCart:function(){this.$set("showSelect",!0)},dismissItemSelect:function(){this.$set("showSelect",!1)},getItem:function(e){var t=this,o=function(e){console.log("[ItemView callback] response: "+(0,n.default)(e.body));var o=e.json();t.$set("item",o),t.$set("isLoading",!1),didLoadItemDetail(o),document.title=this.item.title+" | Lion IQ"},i=function(e){console.log("[error callback] response: "+(0,n.default)(e)),t.$set("isLoading",!1),t.$set("showEmpty",!0)},s=API_URL+"/api/items/"+e,r={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(s,{headers:r}).then(o,i)}}}},21:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"QtyInput",props:{qty:1},methods:{plus:function(){this.qty=this.qty+1},minus:function(){this.qty>0&&(this.qty=this.qty-1)}}}},22:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"NavBarPlaceholder"}},23:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"NavBarPlaceholder"}},36:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"#itemSelect{height:60%;margin-top:100%;width:100%;background-color:#fff;position:fixed;z-index:400}.skew.button{min-width:44px;margin:0 10px}.msgbox-header{text-align:center}button.msgbox-btn{color:#0038d9}",""])},37:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".carousel-item img{width:100%}.item-view .carousel-dot{width:12px;height:12px;border-radius:6px;font-size:0}.item-view .carousel-dot.active{background-color:#ccc}.cta-footer{width:100%;border-top:1px solid #ddd;background-color:#fff;padding:8px 16px;position:fixed;bottom:0;z-index:6}.cta-footer>section{text-align:center}",""])},38:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".qty-form{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center}.qty-input{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:center}.minus-btn,.plus-btn{width:60px}",""])},53:function(e,t){e.exports=' <div id=itemSelect> <section> <div class=pull-left style="margin-top: -20px; margin-right: 20px"> <img :src=item.square_cover_photo_url style="width: 60px; height: 60px"/> </div> <div class=pull-left> <div class=clearfix> <h5 class=price>{{ item.price / 100 | currency "¥ " 2 }}</h5> <p>请选择</p> </div> </div> <div class=pull-right> <div class="mute small button pseudo" v-on:click.self=dismiss>[x]</div> </div> <div class=clearfix></div> </section> <hr/> <section v-if="item.sizes && (item.sizes.length > 0) "> <article class="flex five"> <div class=fifth>尺寸</div> <div class=four-fifth> <div v-for="size in item.sizes" class="size small skew button" :class="{\'outline\': (size != pickedSize)}" v-on:click.self=pickSize(size)> {{ size.label }} </div> </div> </article> <hr class=cell /> </section> <section v-if="item.colors && (item.colors.length > 0)"> <article class="flex five"> <div class=fifth>颜色</div> <div class=four-fifth> <div v-for="color in item.colors" class="color small skew button outline" :class="{\'outline\': (color != pickedColor)}" v-on:click.self=pickColor(color)> {{ color.label }} </div> </div> </article> <hr class=cell /> </section> <section> <article class="flex five"> <div class=fifth>数量</div> <div class=four-fifth> <qty-input :qty=1></qty-input> </div> </article> </section> <section style="position: fixed; bottom: 10px; height: 44px"> <button class="button outline success" style="width: 100%" :disabled=isDisabled() @click=addToCart> 加入购物车 </button> </section> </div> '},54:function(e,t){e.exports=' <div id=item-view> <dark-cover v-show=showSelect transition=fade v-on:click.self=dismissItemSelect> </dark-cover> <nav-bar></nav-bar> <empty-item-view v-show=showEmpty></empty-item-view> <loading-cover v-show=isLoading transition=fade> </loading-cover> <div id=item-view-container> <item-select v-show=showSelect :item=item transition=""> </item-select> <div class=item-view> <carousel :indicators=true :auto=3000 :responsive=100 :loop=true> <carousel-item v-for="photo in item.photos"> <img :src=photo.image_url> </carousel-item> </carousel> </div> <item-view-body :item=item></item-view-body> <div style="height: 70px; width: 100%"></div> <div class="cta-footer center"> <div class="button outline success" style="width: 100%" v-on:click.self=addToCart>加入购物车</div> </div> </div> </div> '},55:function(e,t){e.exports=' <div class=qty-form> <div class=minus-btn @click=minus :disabled="qty <= 0"> - </div> <input class=qty-input :value=qty /> <div class=plus-btn @click=plus> + </div> </div> '},56:function(e,t){e.exports=' <div id=nav-wrapper> <nav style="height: 64px; padding-top: 20px"> </nav> </div> '},57:function(e,t){e.exports=' <div id=tabbar-wrapper> <div style="height: 49px; background-color: white"> </div> </div> '},60:function(e,t,o){var i,s,n={};o(72),i=o(19),s=o(53),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},61:function(e,t,o){var i,s,n={};o(73),i=o(20),s=o(54),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},63:function(e,t,o){var i,s,n={};o(74),i=o(21),s=o(55),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},67:function(e,t,o){var i,s,n={};i=o(22),s=o(56),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},68:function(e,t,o){var i,s,n={};i=o(23),s=o(57),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},72:function(e,t,o){var i=o(36);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},73:function(e,t,o){var i=o(37);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},74:function(e,t,o){var i=o(38);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},91:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(4),n=i(s),r=o(67),c=i(r),a=o(68),l=i(a),p=o(6),d=i(p),u=o(9),f=i(u),m=o(243),v=i(m),h=o(258),x=i(h);t.default={name:"ShopView",components:{NavBarPlaceholder:c.default,TabBarPlaceholder:l.default,LoadingCover:d.default,ErrorView:f.default,Collection:x.default,Banners:v.default},ready:function(){this.loadFromShopData(),this.getCollections(),this.getBanners()},data:function(){return{collections:shopData.collections,banners:shopData.banners,isLoading:!0,showError:!1}},route:{data:function(e){e.to;didMain()}},methods:{loadFromShopData:function(){this.$set("collections",shopData.collections),this.$set("banners",shopData.banners),this.$set("isLoading",!1)},getCollections:function(){var e=this,t=function(t){console.log("[getCollections callback] response: "+(0,n.default)(t.body)),e.$set("collections",t.json()),e.$set("isLoading",!1)},o=function(t){console.log("[error callback] response: "+(0,n.default)(t)),e.$set("isLoading",!1),e.$set("showError",!0)},i=API_URL+"/api/collections",s={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(i,{headers:s}).then(t,o)},getBanners:function(){var e=this,t=function(t){console.log("[getBanners callback] response: "+(0,n.default)(t.body)),e.$set("banners",t.json())},o=function(e){console.log("[getBanners error callback] response: "+(0,n.default)(e))},i=API_URL+"/api/banners",s={"Content-Type":"application/json",Accept:"application/json","X-APP-KEY":APP_KEY,"X-APP-SECRET":APP_SECRET};this.$http.get(i,{headers:s}).then(t,o)}}}},95:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(18);t.default={name:"Banners",props:{banners:Array},components:{Carousel:i.Carousel,CarouselItem:i.CarouselItem}}},111:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(260),n=i(s);t.default={name:"Collection",props:{collection:Object},components:{ItemsGrid:n.default}}},112:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Item",props:{item:Object}}},114:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(259),n=i(s);t.default={name:"ItemsGrid",props:{items:Array},components:{Item:n.default}}},164:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"#shop{margin-top:64px;padding-top:0;padding-bottom:49px;background-color:#f6f6f6}#shop-footer{position:fixed;bottom:0;z-index:6;width:100%}",""])},168:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".banners-view{margin-bottom:30px}.carousel-item img{width:100%}.banners-view .carousel-dot{width:12px;height:12px;border-radius:6px;font-size:0}.banners-view .carousel-dot.active{background-color:#ccc}",""])},184:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,'.collection{margin-bottom:40px}.collection-title{margin:8px}.fancy{line-height:.5;text-align:center}.fancy span{display:inline-block;position:relative}.fancy span:after,.fancy span:before{content:"";position:absolute;height:5px;border-top:1px solid #ddd;top:2.5px;width:50%}.fancy span:before{right:100%;margin-right:15px}.fancy span:after{left:100%;margin-left:15px}',""])},185:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,"h5{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}article.item{box-shadow:0 1px .2em hsla(0,0%,7%,.2);background-color:#fff}",""])},187:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".island{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},204:function(e,t){e.exports=' <div id=shop> <nav-bar-placeholder></nav-bar-placeholder> <error-view v-show=showError></error-view> <loading-cover v-show=isLoading transition=fade> </loading-cover> <banners :banners=banners></banners> <collection v-for="collection in collections" :collection=collection> </collection> <div id=shop-footer> <tab-bar-placeholder></tab-bar-placeholder> </div> </div> '},208:function(e,t){e.exports=' <div class=banners-view v-if="banners && (banners.length > 0)"> <carousel :indicators=true :auto=3000 :responsive=67 :loop=true> <carousel-item v-for="banner in banners"> <img :src=banner.image_url> </carousel-item> </carousel> </div> '},224:function(e,t){e.exports=' <div class=collection-wrapper> <h4 class="fancy collection-title"><span>{{ collection.title }}</span></h4> <div class=collection v-if="collection.items && (collection.items.length > 0)"> <items-grid :items=collection.items></items-grid> </div> </div> '},225:function(e,t){e.exports=' <article class=item> <a href="#/items/{{ item.key }}"> <div class=full-width><img :src=item.square_cover_photo_url /></div> <section> <h5 class=item_title>{{ item.title }}</h5> <p style="margin: 0"><span class=price>{{ item.price / 100 | currency "¥ " 2 }}</span></p> </section> </a> </article> '},227:function(e,t){e.exports=' <div class=items-container> <div class="items-grid flex two"> <item v-for="item in items" :item=item track-by=$index></item> </div> </div> '},240:function(e,t,o){var i,s,n={};o(268),i=o(91),s=o(204),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},243:function(e,t,o){var i,s,n={};o(272),i=o(95),s=o(208),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},258:function(e,t,o){var i,s,n={};o(288),i=o(111),s=o(224),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},259:function(e,t,o){var i,s,n={};o(289),i=o(112),s=o(225),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},260:function(e,t,o){var i,s,n={};o(291),i=o(114),s=o(227),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(r.template=s),r.computed||(r.computed={}),Object.keys(n).forEach(function(e){var t=n[e];r.computed[e]=function(){return t}})},268:function(e,t,o){var i=o(164);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},272:function(e,t,o){var i=o(168);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},288:function(e,t,o){var i=o(184);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},289:function(e,t,o){var i=o(185);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},291:function(e,t,o){var i=o(187);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)}});
//# sourceMappingURL=main.js.map